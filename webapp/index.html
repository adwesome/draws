<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–†–æ–∑—ã–≥—Ä—ã—à –ø–æ–¥–∞—Ä–∫–æ–≤</title>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4DSL3R9T5W"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4DSL3R9T5W');
    </script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- https://core.telegram.org/bots/webapps#initializing-web-apps -->
    <script src="src/telegram/telegram-web-app.js"></script>
    <!--script src="https://telegram.org/js/telegram-web-app.js"></script--> 

    <!-- https://dev.vk.com/ru/bridge/getting-started -->
    <!--script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
    <script>
      vkBridge.send('VKWebAppInit');
    </script-->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script type="text/javascript" src="src/nanobar/nanobar.min.js"></script>

    <link rel="stylesheet" href="src/flipdown/flipdown.min.css"/>
    <script type="text/javascript" src="src/flipdown/flipdown.min.js"></script>
    
    <link rel="stylesheet" href="src/first_screen.css"/>
    <link rel="stylesheet" href="src/second_screen.css"/>

    <link rel="stylesheet" href="src/play.css"/>
    <style type="text/css">
    </style>

    <script type="text/javascript" src="src/common.js?v=7"></script>
    <script type="text/javascript" src="src/first_screen.js?v=7"></script>
    <script type="text/javascript" src="src/second_screen.js?v=7"></script>
    <script type="text/javascript" src="src/poll.js?v=7"></script>
    <script type="text/javascript" src="src/play.js?v=7"></script>
    <script type="text/javascript">
      window.onload = function() {
        get_uid();  // create in case not exists yet

        window.Telegram.WebApp.ready();
        window.Telegram.WebApp.expand();
        //window.Telegram.WebApp.setBackgroundColor("#fffaf0");  // floralwhite
        window.Telegram.WebApp.setHeaderColor("#fffaf0");  // floralwhite

        if (!get_item_from_local_storage('first_screen_passed'))
          draw_demography('first_screen_demography_poll');
        else if (!get_item_from_local_storage('second_screen_passed'))
          second_screen();
        else {
          document.getElementById('first_screen').remove();

          // const demography = get_items_from_local_storage('choices3');
          // save_into_remote_storage('/register/player/demography', demography);
          // const brands = get_items_from_local_storage('choices4');
          // save_into_remote_storage('/register/player/brands', brands);

          play();
        }
      }
    </script>
  </head>
  <body>

    <div id="intro">
      <div class="container">
        <div class="row">
          <div class="col-xl-4 offset-xl-4 col-lg-6 offset-lg-3 col-md-8 offset-md-2 col-12 screen">
            <div class="col-10 offset-1">
              <div id="first_screen">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                <p style="margin-bottom: 1em;">–ü—Ä–µ–∂–¥–µ —á–µ–º –ø–µ—Ä–µ–π—Ç–∏ –∫ —Ä–æ–∑—ã–≥—Ä—ã—à–∞–º –ø–æ–¥–∞—Ä–∫–æ–≤, —Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ –Ω–∞–º, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ–º–Ω–æ–≥–æ –æ —Å–µ–±–µ. –≠—Ç–∞ –∞–Ω–∫–µ—Ç–∞, –∫–∞–∫ –∏ —É—á–∞—Å—Ç–∏—è –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–∞—Ö, <b>–ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–Ω–æ–Ω–∏–º–Ω—ã–µ</b>.</p>
                <div id="first_screen_demography_poll"></div>
                <div class="d-grid gap-2">
                  <button id="to_second" class="btn btn-primary" disabled>–î–∞–ª–µ–µ</button>
                  <!--p style="font-size: 0.8em;"><i>–î–∞–ª–µ–µ: –≤—ã–±–æ—Ä –±—Ä–µ–Ω–¥–æ–≤</i></p-->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="container">
        <div class="row">
          <div class="col-xl-4 offset-xl-4 col-lg-6 offset-lg-3 col-md-8 offset-md-2 col-12 screen">
            <div class="col-10 offset-1">
              <div id="second_screen">
                <p style="margin-bottom: 1em;">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∏–∂–µ 1 –∏–ª–∏ 2 –±—Ä–µ–Ω–¥–∞, –≤ –ø—Ä–æ–±–Ω–æ–º —Ä–æ–∑—ã–≥—Ä—ã—à–∞—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ—É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å 15&nbsp;–∏&nbsp;16&nbsp;–Ω–æ—è–±—Ä—è:</p>
                <img id="brand-mk" class="brand mk" src="img/brands/logos/mk.png"><br>
                <img id="brand-lenta" class="brand lenta" src="img/brands/logos/lenta.png">
                
                <div class="d-grid gap-2" style="margin-top: 1.2em;">
                  <button id="to_third" class="btn btn-primary" disabled>–ù–∞—á–∞—Ç—å —Ä–æ–∑—ã–≥—Ä—ã—à</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-xl-4 offset-xl-4 col-lg-6 offset-lg-3 col-md-8 offset-md-2 col-12 screen-">

        <div id="third_screen" class="swiper-outer" pagination="true">
          <div class="swiper-wrapper">
            <div class="swiper-slide">
              <div class="swiper-inner">
                <div class="swiper-wrapper">

                  <div class="swiper-slide">
                    <!-- https://codepen.io/Totati/pen/pPXrJV -->
                    <!-- https://github.com/andreruffert/scratchie.js -->
                    <div class="container-" id="js-container">
                      <p id="js-canvas-explain"><b>–ü–æ–ª–Ω–æ—Å—Ç—å—é</b> —Å–æ—Ç—Ä–∏—Ç–µ –∑–∞—â–∏—Ç–Ω—ã–π —Å–ª–æ–π –∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å, –∫–æ–≥–¥–∞ —ç–∫—Ä–∞–Ω –ø–µ—Ä–µ–≤–µ—Ä–Ω–µ—Ç—Å—è, –∏ –Ω–∞ –Ω–µ–º –ø–æ—è–≤–∏—Ç—Å—è –æ–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç &mdash; —Ç–∞–∫ –≤–∞—à–µ —É—á–∞—Å—Ç–∏–µ –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–µ –±—É–¥–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ</p>
                      <canvas class="canvas" id="js-canvas"></canvas>
                      <div id="ad"></div>
                      <div id="ad_explain"><!--p>–ù–∞ —ç—Ç–æ–º —ç–∫—Ä–∞–Ω–µ –ø–æ–¥ –∑–∞—â–∏—Ç–Ω—ã–º —Å–ª–æ–µ–º –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∫–∞–∫–æ–µ-—Ç–æ —Ä–µ–∫–ª–∞–º–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ç –∫–æ–º–ø–∞–Ω–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ –ø—Ä–∏–≤–æ–∑–µ, –æ–± –∞–∫—Ü–∏–∏ "—Å–∫–∏–¥–∫–∞ –Ω–∞ –≤—Å–µ", –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å–µ—Ç–∏—Ç—å –º–∞–≥–∞–∑–∏–Ω / —Å–∞–ª–æ–Ω –≤ –¥–µ–∫–∞–±—Ä–µ –∏–ª–∏ –≤ —è–Ω–≤–∞—Ä–µ –∏ —Ç.–¥. &mdash; —á—Ç–æ —É–≥–æ–¥–Ω–æ, —á—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–æ–±—â–∏—Ç—å –≤–∞—à–µ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏, –ª—é–¥—è–º, –∫–æ—Ç–æ—Ä—ã–µ —É–∫–∞–∑–∞–ª–∏, —á—Ç–æ –æ–Ω–∏ <b><i>—Ö–æ—Ç—è—Ç</i></b> –ø–æ—É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–µ –ø–æ–¥–∞—Ä–∫–æ–≤ –æ—Ç –≤–∞—à–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.</p--></div>
                    </div>
                  </div>

                  <div class="swiper-slide non-white-bg center">
                    <p id="flipdown_header">–ß–µ—Ä–µ–∑</p>
                    <div id="flipdown" class="flipdown"></div>
                    <div id="flipdown_explain">
                      <p><span class="conditions"><span id="percent"></span>%</span> —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤—ã–∏–≥—Ä–∞—é—Ç –ø–æ–¥–∞—Ä–æ–∫ –æ—Ç <span class="conditions" id="who"></span>. –í—ã —É—á–∞—Å—Ç–≤—É–µ—Ç–µ&nbsp;üëç</p>
                    </div>
                  </div>              

                </div>
                <div class="swiper-pagination swiper-inner-pagination"></div>
              </div>
            </div>
            <div class="swiper-slide non-white-bg list-">
              <h2>–í–∞—à–∏ —Ä–æ–∑—ã–≥—Ä—ã—à–∏</h2>
              <div id="drawings_list">
                <div id="yesterday">
                  <h3>–í—á–µ—Ä–∞ –∏ –ø–æ–∑–∞–≤—á–µ—Ä–∞</h3>
                  <div id="just"><p>–ù–µ—Ç</p></div>  
                </div>
                <h3>–°–µ–≥–æ–¥–Ω—è</h3>
                <div id="now"><p>–ù–µ—Ç</p></div>
                <h3>–ó–∞–≤—Ç—Ä–∞</h3>
                <div id="next"><p>–ù–µ—Ç</p></div>
              <h2 style="margin: 1.5em 0 0.3em 0">–í–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
                <div id="past"><p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏—Å—Ç–æ—Ä–∏—è –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º —Ä–æ–∑—ã–≥—Ä—ã—à–∞–º, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã –±—É–¥–µ—Ç–µ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.</p></div>
                <br><br>
              </div>
            </div>

            <div class="swiper-slide non-white-bg list-">
              <h2>–í–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –±—Ä–µ–Ω–¥—ã</h2>
              <p>–ë–ª–∞–≥–æ–¥–∞—Ä—è –ø—Ä–∞–≤–¥–∏–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤–∞–º–∏ –Ω–∏–∂–µ, –≤–ª–∞–¥–µ–ª—å—Ü—ã –±—Ä–µ–Ω–¥–æ–≤ —É–∑–Ω–∞—é—Ç, –∫–∞–∫–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è –∏—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç &mdash; —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –∏–º –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å –ª—É—á—à–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ –ø–æ–¥–∞—Ä–∫–∏ –¥–ª—è –≤–∞—Å.</p>
              <p style="font-size: 0.85em;">–í—ã–±—Ä–∞–Ω–Ω—ã–µ –≤–∞–º–∏ –æ–ø—Ü–∏–∏ –Ω–∏–∂–µ, –∫–∞–∫ –∏ –≤—Å–µ –≤–∞—à–∏ —É—á–∞—Å—Ç–∏—è –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–∞—Ö &mdash; <b>–ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–Ω–æ–Ω–∏–º–Ω—ã–µ</b>.</p>

              <div class="accordion" id="accordionExample">
                <div style="margin-bottom: 5px;">
                  <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                        –û –≤–∞—Å
                      </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                      <div class="accordion-body">
                        <div id="mini_app_settings"></div>
                      </div>
                    </div>
                  </div>
                </div>
                <div id="brands">
                  <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                        –ë—Ä–µ–Ω–¥—ã
                      </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
                      <div class="accordion-body">
                        <p>–í—ã–±–µ—Ä–∏—Ç–µ –±—Ä–µ–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –ª—é–±–∏—Ç–µ, —Ç–æ—á–∫–∏ –ø—Ä–æ–¥–∞–∂ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã —á–∞—â–µ –≤—Å–µ–≥–æ –ø–æ—Å–µ—â–∞–µ—Ç–µ, –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–µ –ø–æ–¥–∞—Ä–∫–æ–≤ –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.</p>
                        <p style="font-size: 0.85em;">–ï—Å–ª–∏ –≤—ã –∑–∞–º–µ—Ç–∏–ª–∏, —á—Ç–æ –∫–∞–∫–æ–≥–æ-—Ç–æ –±—Ä–µ–Ω–¥–∞ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, <a href="https://vk.com/adwesome" target="_blank">—Å–æ–æ–±—â–∏—Ç–µ –Ω–∞–º</a>.</p>
                        <div id="list" class="section"><p><b>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ, —Å–ø–∏—Å–æ–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</b></p></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="swiper-pagination swiper-outer-pagination"></div>
        </div>
      </div>
    </div>

  </body>
</html>
